<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:with="http://www.thymeleaf.org/extras/with" layout:decorate="~{layout}" with:title="'B210'">
<th:block layout:fragment="content">
  <div class="bottom">
    <div class=" col">
      <div class="container">
        <input type="search" class="form-control" id="input-search" placeholder="Search..." style="margin-top: 20px;">
        <div class="card">
          <div class="card-block">
            <div id="showList">
              <!-- Show List Vacancy -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="detailVacancy" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true" style="overflow-y:auto;">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Detail Pelamar</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-sm-3">
              <div class="sidebar-nav">
                <div class="navbar navbar-default" role="navigation">
                  <div class="navbar-collapse sidebar-navbar-collapse">
                    <div class="list-group" id="list-tab" role="tablist">
                      <a class="list-group-item list-group-item-action active" id="list-profile-list" data-toggle="list"
                        href="#list-profile" role="tab" aria-controls="profile">Profile</a>
                      <a class="list-group-item list-group-item-action" id="list-biodata-list" data-toggle="list"
                        href="#list-biodata" role="tab" aria-controls="biodata">Biodata</a>
                      <a class="list-group-item list-group-item-action" id="list-pengalaman-kerja-list"
                        data-toggle="list" href="#list-pengalaman-kerja" role="tab"
                        aria-controls="pengalaman-kerja">Pengalamann Kerja</a>
                      <a class="list-group-item list-group-item-action" id="list-pendidikan-list" data-toggle="list"
                        href="#list-pendidikan" role="tab" aria-controls="pendidikan">Pendidikan</a>
                      <a class="list-group-item list-group-item-action" id="list-pelatihan-list" data-toggle="list"
                        href="#list-pelatihan" role="tab" aria-controls="pelatihan">Pelatihan</a>
                      <a class="list-group-item list-group-item-action" id="list-sertifikasi-list" data-toggle="list"
                        href="#list-sertifikasi" role="tab" aria-controls="sertifikasi">Sertifikasi</a>
                      <a class="list-group-item list-group-item-action" id="list-sumber-lowongan-kerja-list"
                        data-toggle="list" href="#list-sumber-lowongan-kerja" role="tab"
                        aria-controls="sumber-lowongan-kerja">Sumber Lowongan Kerja</a>
                      <a class="list-group-item list-group-item-action" id="list-organisasi-list" data-toggle="list"
                        href="#list-organisasi" role="tab" aria-controls="organisasi">Organisasi</a>
                      <a class="list-group-item list-group-item-action" id="list-keluarga-list" data-toggle="list"
                        href="#list-keluarga" role="tab" aria-controls="keluarga">Keluarga</a>
                      <a class="list-group-item list-group-item-action" id="list-keahlian-list" data-toggle="list"
                        href="#list-keahlian" role="tab" aria-controls="keahlian">Keahlian</a>
                      <a class="list-group-item list-group-item-action" id="list-lain-lain-list" data-toggle="list"
                        href="#list-lain-lain" role="tab" aria-controls="lain-lain">Lain - Lain</a>
                      <a class="list-group-item list-group-item-action" id="list-dokumen-list" data-toggle="list"
                        href="#list-dokumen" role="tab" aria-controls="dokumen">Dokumen</a>
                      <a class="list-group-item list-group-item-action" id="list-catatan-list" data-toggle="list"
                        href="#list-catatan" role="tab" aria-controls="catatan">Catatan</a>
                      <a class="list-group-item list-group-item-action" id="list-aktivasi-akun-list" data-toggle="list"
                        href="#list-aktivasi-akun" role="tab" aria-controls="aktivasi-akun">Aktivasi Akun</a>
                      <a class="list-group-item list-group-item-action" id="list-lihat-tes-list" data-toggle="list"
                        href="#list-lihat-tes" role="tab" aria-controls="lihat-tes">Lihat Tes</a>
                      <a class="list-group-item list-group-item-action" id="list-hasil-tes-list" data-toggle="list"
                        href="#list-hasil-tes" role="tab" aria-controls="hasil-tes">Hasil Tes</a>
                    </div>
                  </div>
                  <!--/.nav-collapse -->
                </div>
              </div>
            </div>
            <div class="col-sm-9">
              <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="list-profile" role="tabpanel"
                  aria-labelledby="list-profile-list">
                  <div class="col-md-12">
                    <div class="row mb-3">
                      <div class="col-md-2">
                        <div id="showPhoto">
                          <!-- Show Photo -->
                        </div>
                      </div>
                      <div class="col-md-8">
                        <div id="showProfile">
                          <!-- Show Profile -->
                        </div>
                      </div>
                      <div class="col-md-2">
                        <button type="button" class="btn btn-primary mt-1 ml-5">Unduh</button>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12" style="background:#F4F4F4;">
                        <h5><strong>Pendidikan</strong></h5>
                        <div id="showListPendidikan">
                          <!-- Show Pendidikan -->
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12">
                        <h5><strong>Pengalaman</strong></h5>
                        <div id="showListPengalaman">
                          <!-- Show Pengalaman -->
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12" style="background:#F4F4F4;">
                        <h5><strong>Keterampilan</strong></h5>
                        <div class="row">
                          <div class="col-md-2">
                            <p>Tingkat Lanjutan</p>
                            <p>Menengah</p>
                            <p>Pemula</p>
                          </div>
                          <div class="col-md-10">
                            <div id="keterampilanL1"></div>
                            <div id="keterampilanL2"></div>
                            <div id="keterampilanL3"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12">
                        <h5><strong>Training</strong></h5>
                        <div id="showListTraining">
                          <!-- Show Training -->
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12" style="background:#F4F4F4;">
                        <h5><strong>Sertifikasi</strong></h5>
                        <div id="showListSertifikasi">
                          <!-- Show Sertifikasi -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="list-pendidikan" role="tabpanel" aria-labelledby="list-pendidikan-list">
                  <h4>Pendidikan <a data-toggle="modal" data-target="#addModal" href="#" id="showAddData"><i
                        class="fa fa-plus-circle" aria-hidden="true"></i></a></h4>
                  <div class="card">
                    <div class="card-block">
                      <table class="table table-hover">
                        <thead>
                          <tr class="text-center">
                            <th scope="col">SEKOLAH/INSTANSI</th>
                            <th scope="col">JENJANG</th>
                            <th scope="col">PERIODE</th>
                            <th scope="col">JURUSAN</th>
                            <th scope="col">IPK</th>
                            <th scope="col">#</th>
                          </tr>
                        </thead>
                        <tbody id="tbEducation">
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class="modal-body">
                    <!-- Content will be loaded here...  -->
                  </div>
                </div>
                <div class="tab-pane fade" id="list-organisasi" role="tabpanel" aria-labelledby="list-organisasi-list">
                  Organisasi
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>

  <!-- Form Add Data  -->
  <div class="modal fade" id="addData" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Form Add Education</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form id="formAddData">
            <div class="form-row">
              <div class="col-md-6">
                <input class="form-control" type="hidden" id="biodataId" name="biodataId">
                <label style="font-size: 10pt;" for="schoolName">Nama Sekolah/Instansi*</label>
                <input class="form-control" type="text" id="schoolName" name="schoolName" maxlength="100">
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="city">Kota</label>
                <input class="form-control" type="text" id="city" name="city" maxlength="50">
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="country">Negara</label>
                <input class="form-control" type="text" id="country" name="country" maxlength="50">
              </div>
            </div>
            <div class="form-row">
              <div class="col-md-6">
                <label style="font-size: 10pt;" for="educationLevelId">Jenjang Pendidikan*</label>
                <select class="form-control get_education_level" name="educationLevelId" id="educationLevelId"></select>
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="entryYear">Tahun Masuk</label>
                <select class="form-control get_entry_year" name="entryYear" id="entryYear"></select>
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="graduationYear">Tahun Lulus</label>
                <select class="form-control get_graduation_year" name="graduationYear" id="graduationYear"></select>
              </div>
            </div>
            <div class="form-row">
              <div class="col-md-6">
                <label style="font-size: 10pt;" for="major">Jurusan</label>
                <input class="form-control" type="text" id="major" name="major" maxlength="100">
              </div>
              <div class="col-md-6">
                <label style="font-size: 10pt;" for="gpa">IPK</label>
                <input class="form-control" type="number" id="gpa" name="gpa" step=".01" min="0" value="0" max="4"
                  pattern="/^-?\d+\.?\d*$/"
                  onkeypress="if(this.value.length==4) return false; return event.charCode >= 48 && event.charCode <=57 || event.charCode == 46">
              </div>
            </div>
            <!-- <div class="form-row" id="gradSchool1" style="display:none">
                <div class="col-md-12">
                    <label style="font-size: 10pt;" for="judulTa">Judul TA/Skripsi</label><br>
                    <input class="form-control" type="text" id="judulTa" name="judulTa" maxlength="255" value="-">
            </div>
        </div>
        <div class="form-row" id="gradSchool2" style="display:none">
                <div class="col-md-12">
                    <label style="font-size: 10pt;" for="deskripsiTa">Deskripsi TA/Skripsi</label>
                    <input class="form-control" type="text" id="deskripsiTa" name="deskripsiTa" maxlength="5000" value="-">
            </div>
        </div> -->
            <div class="form-row">
              <div class="col-md-12">
                <label style="font-size: 10pt;" for="notes">Catatan</label>
                <textarea class="form-control" type="text" id="notes" name="notes" maxlength="1000"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" id="saveBtn" class="btn btn-primary">Save</button>
        </div>
      </div>
    </div>
  </div>


  <!-- Form Edit Data  -->
  <div class="modal fade" id="editData" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Form Edit Education</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <input class="form-control" type="hidden" id="ebiodata_id" name="biodataId">
          <form id="formEditData">
            <div class="form-row">
              <div class="col-md-6">
                <input class="form-control" type="hidden" id="eid" name="id">
                <label style="font-size: 10pt;" for="schoolName">Nama Sekolah/Instansi*</label>
                <input class="form-control" type="text" id="eschoolName" name="schoolName" maxlength="100">
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="city">Kota</label>
                <input class="form-control" type="text" id="ecity" name="city" maxlength="50">
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="country">Negara</label>
                <input class="form-control" type="text" id="ecountry" name="country" maxlength="50">
              </div>
            </div>
            <div class="form-row">
              <div class="col-md-6">
                <label style="font-size: 10pt;" for="educationLevelId">Jenjang Pendidikan *</label>
                <select class="form-control" name="educationLevelId" id="eeducationLevelId"></select>
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="entryYear">Tahun Masuk</label>
                <select class="form-control eget_entry_year" name="entryYear" id="eentryYear"></select>
              </div>
              <div class="col-md-3">
                <label style="font-size: 10pt;" for="graduationYear">Tahun Lulus</label>
                <select class="form-control eget_graduation_year" name="graduationYear" id="egraduationYear"></select>
              </div>
            </div>
            <div class="form-row">
              <div class="col-md-6">
                <label style="font-size: 10pt;" for="major">Jurusan</label>
                <input class="form-control " type="text" id="emajor" name="major" maxlength="100">
              </div>
              <div class="col-md-6">
                <label style="font-size: 10pt;" for="gpa">IPK</label><br>
                <input class="form-control" type="text" id="egpa" name="gpa" step=".01" min="0" value="0" max="4"
                  pattern="/^-?\d+\.?\d*$/"
                  onkeypress="if(this.value.length==4) return false; return event.charCode >= 48 && event.charCode <=57 || event.charCode == 46">
              </div>
            </div>
            <!-- <div class="form-row" id="egradSchool1" style="display:none">
            <div class="col-md-12">
                <label style="font-size: 10pt;" for="judulTa">Judul TA/Skripsi</label><br>
                <input class="form-control" type="text" id="ejudulTa" name="judulTa" maxlength="255">
        </div>
        </div>
        <div class="form-row" id="egradSchool2" style="display:none">
            <div class="col-md-12">
                <label style="font-size: 10pt;" for="deskripsiTa">Deskripsi TA/Skripsi</label>
                <input class="form-control" type="text" id="edeskripsiTa" name="deskripsiTa" maxlength="5000">
        </div>
        </div> -->
            <div class="form-row">
              <div class="col-md-12">
                <label style="font-size: 10pt;" for="notes">Catatan</label>
                <textarea class="form-control" type="text" id="enotes" name="notes" maxlength="1000"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" id="editBtn" class="btn btn-primary">Update</button>
        </div>
      </div>
    </div>
  </div>
</th:block>
<th:block layout:fragment="vacancy">

  <script th:inline="javascript">
    $(() => {
      loadData();
    });
    loadData = () => {

      $.ajax({
        url: 'api/biodata/',
        type: 'get',
        contentType: 'application/json',
        success: (res) => {
          $('#showList').html("");
          res.map((data) => {
            $.ajax({
              url: 'api/education/last/' + data.id,
              type: 'get',
              contentType: "application/json",
              success: function (result) {
                result.map((data2) => {
                  var actions =
                    '<div class="col-md-7">\n' +
                    '   <div class="align-right text-right" style="margin-right:30px;">\n' +
                    '       <a onclick="get_id_biodata(' + data.id + ')" data-toggle="modal" data-target="#detailVacancy" href="#"><i class="fa fa-search" aria-hidden="true"></i></a>\n' +
                    '       <a href="/vacancy/"><i class="fa fa-envelope" aria-hidden="true" ></i></a>\n' +
                    '   </div>\n' +
                    '</div>'
                  var markup =
                    '<div class="card bg-light text-dark">\n' +
                    '<div class="searchable-container">\n' +
                    '<div class="items col-xs-12 col-sm-12 col-md-12 col-lg-12 mb-3 clearfix">\n' +
                    '    <div class="info-block block-info clearfix">\n' +
                    '    <h4><strong>' + data.fullName + '</strong></h4>\n' +
                    '    <div class="row">\n' +
                    '        <div class="col-md-2">\n' +
                    '              <p>Nama Panggilan</p>\n' +
                    '        </div>\n' +
                    '       <div class="col-md-3">\n' +
                    '              <p class="text-left"><strong>' + data.nickName + '</strong></p>\n' +
                    '        </div>\n' +
                    '    </div>\n' +
                    '   <div class="row">\n' +
                    '        <div class="col-md-2">\n' +
                    '              <p>Email</p>\n' +
                    '        </div>\n' +
                    '        <div class="col-md-3">\n' +
                    '              <p class="text-left"><strong>' + data.email + '</strong></p>\n' +
                    '        </div>\n' +
                    '        ' + actions + '\n' +
                    '    </div>\n' +
                    '    <div class="row">\n' +
                    '        <div class="col-md-2">\n' +
                    '             <p>No. Handphone</p>\n' +
                    '       </div>\n' +
                    '        <div class="col-md-3">\n' +
                    '              <p class="text-left"><strong>' + data.phoneNumber1 + '</strong></p>\n' +
                    '        </div>\n' +
                    '    </div>\n' +
                    '    <div class="row">\n' +
                    '        <div class="col-md-2">\n' +
                    '              <p>Pendidikan</p>\n' +
                    '        </div>\n' +
                    '        <div class="col-md-5">\n' +
                    '              <p class="text-left"><strong>' + data2.major + ', ' + data2.schoolName + '</strong></p>\n' +
                    '        </div>\n' +
                    '    </div>\n' +
                    '</div>\n' +
                    '</div>\n' +
                    '</div>\n' +
                    '</div>'
                  $('#showList').append(markup)
                })
              },
              error: function () {
                swal.fire("Error!", "Fetch Last Education Failed", "error");
              }
            })
          })
        },
        error: () => {
          swal.fire("Error!", "Fetch Biodata Failed", "error");
        }
      })
    }

    $('#addData').on('hidden.bs.modal', function () {
      $('#detailVacancy').modal('show');
    })

    $('#editData').on('hidden.bs.modal', function () {
      $('#detailVacancy').modal('show');
    })

    $(function () {
      $('#input-search').on('keyup', function () {
        var rex = new RegExp($(this).val(), 'i');
        $('.searchable-container .items').hide();
        $('.searchable-container .items').filter(function () {
          return rex.test($(this).text());
        }).show();
      });
    });


    $('#showAddData').click(() => {
      $('#addData').modal('show');
      $('#detailVacancy').modal('hide');
      $('#formAddData input[type=text]').val("");
      $('#formAddData input[type=number]').val("");
      $('#formAddData textarea[type=text]').val("");
      var temp = "";
      $("#educationLevelId").val(temp);
      $("#entryYear").val(temp);
      $("#graduationYear").val(temp);
    })

    $(() => {
      get_entry_year();
    });
    get_entry_year = () => {
      var current_year = new Date();
      var year = current_year.getFullYear();
      var value_year = "";
      value_year += '<option value="">- Pilih -</option>';
      var i = 1990;
      while (i <= year) {
        value_year += `<option value="` + i + `">` + i + `</option>`;
        i++;
      }
      $("#entryYear").html(value_year);
    }


    $(() => {
      get_graduation_year();
    });
    get_graduation_year = () => {
      $(document).ready(function () {
        $('#entryYear').on('change', function () {
          var j = this.value;
          var current_year = new Date();
          var year = current_year.getFullYear();
          var value_year = "";
          value_year += '<option value="">- Pilih -</option>';
          if (this.value == "") {
          } else {
            while (j <= year) {
              value_year += `<option value="` + j + `">` + j + `</option>`;
              j++;
            }
          }
          $("#graduationYear").html(value_year);
        });
      });
    }



    $(() => {
      eget_entry_year();
    });
    eget_entry_year = () => {
      var current_year = new Date();
      var year = current_year.getFullYear();
      var value_year = "";
      value_year += '<option value="">- Pilih -</option>';
      var i = 1990;
      while (i <= year) {
        value_year += `<option value="` + i + `">` + i + `</option>`;
        i++;
      }
      $("#eentryYear").html(value_year);

    }

    $(() => {
      eget_graduation_year();
    });
    eget_graduation_year = () => {
      var current_year = new Date();
      var year = current_year.getFullYear();
      var value_year = "";
      value_year += '<option value="">- Pilih -</option>';
      var j = 1990;
      while (j <= year) {
        value_year += `<option value="` + j + `">` + j + `</option>`;
        j++;
      }
      $("#egraduationYear").html(value_year);
    }

    $(() => {
      get_education_level();
    });
    get_education_level = () => {
      $.ajax({
        url: 'api/education-level',
        type: 'get',
        contentType: "application/json",
        success: function (result) {
          var optValue = "";
          optValue += '<option value="">- Pilih -</option>';
          for (var i = 0; i < result.length; i++) {
            optValue += `<option value="${result[i].id}">${result[i].name}</option>`;
          }
          $("#educationLevelId").html(optValue);

        },
        error: function () {
          swal.fire("Error!", "Fetch Education Level Failed", "error");
        }
      })
    }

    function gender(gender) {
      if (gender == true) {
        return "Laki-Laki";
      } else {
        return "Perempuan";
      }
    }

    function age(dob) {
      var today = new Date();
      var birthday = new Date(dob);
      var year = 0;
      if (today.getMonth() < birthday.getMonth()) {
        year = 1;
      } else if ((today.getMonth() == birthday.getMonth()) && today.getDate() < birthday.getDate()) {
        year = 1;
      }
      var age = today.getFullYear() - birthday.getFullYear() - year;
      if (age < 0) {
        age = 0;
      }
      return age;
    }

    function totaldurationcertificate(traiYear, traiDuration, traiPeriodId) {
      if (traiPeriodId == 1) { //If Type Period Year
        var total = 0;
        var ty = parseInt(traiYear);
        total = ty + traiDuration;
      } else {
        total = traiYear;
      }
      return total;
    }

    // function levelskill1(skillname, skilllevel){
    //   var show1 = "";
    //   if (skilllevel == 1){
    //     show1 = skillname;
    //   } else {
    //     show1 = "";
    //   }
    //   return show1;
    // }

    // function levelskill2(skillname, skilllevel){
    //   var show2 = "";
    //   if (skilllevel == 2){
    //     show2 = skillname;
    //   } else {
    //     show2 = "";
    //   }
    //   return show2;
    // }

    // function levelskill3(skillname, skilllevel){
    //   var show3 = "";
    //   if (skilllevel == 3){
    //     show3 = skillname;
    //   } else {
    //     show3 = "";
    //   }
    //   return show3;
    // }


    function get_id_biodata(id) {
      $.ajax({
        url: 'api/biodata/' + id,
        type: 'get',
        contentType: 'application/json',
        success: (res1) => {
          $("#biodataId").val(id);

          $.ajax({
            url: 'api/biodata-attachment/profile/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (result) => {
              $('#showPhoto').html("");
              var imgurl = result.filePath + result.fileName;
              var showPhotoProfile =
                '<img src="' + imgurl + '" style="width:130px;height:130px;">'
              $('#showPhoto').append(showPhotoProfile);

            },
            error: () => {
              swal.fire("Error!", "Fetch Data Image Failed", "error");
            }
          })

          $.ajax({
            url: 'api/education/last/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (result1) => {
              result1.map((datares1) => {
                $('#showProfile').html("");
                var sett1 =
                  '     <h3><strong>' + res1.fullName + '</strong></h3>\n' +
                  '     <h5>' + age(res1.dob) + ' Tahun</h5>\n' +
                  '     <h5>' + gender(res1.gender) + '</h5>\n' +
                  '     <h5>' + datares1.major + ', ' + datares1.schoolName + '</h5>'
                $('#showProfile').append(sett1);
              })
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Last Education Failed", "error");
            }
          })

          // Start List Education
          $.ajax({
            url: 'api/education/level/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (res2) => {
              $('#showListPendidikan').html("");
              res2.map((data2) => {
                if (data2.entryYear == "" || data2.entryYear == null) {
                  data2.entryYear = "";
                }
                if (data2.graduationYear == "" || data2.graduationYear == null) {
                  data2.graduationYear = "";
                }
                if (data2.major == "" || data2.major == null) {
                  data2.major = "-";
                }
                if (data2.gpa == "" || data2.gpa == null || data2.gpa == 0) {
                  data2.gpa = "-";
                }
                if (data2.entryYear == data2.graduationYear) {
                  var set2 =
                    '<div class="row">\n' +
                    '   <div class="col-md-2">\n' +
                    '      <p>' + data2.entryYear + '</p>\n' +
                    '   </div>\n' +
                    '   <div class="col-md-10">\n' +
                    '      <h6><strong>' + data2.schoolName + ', ' + data2.country + '</strong></h6>\n' +
                    '      <h6><strong>' + data2.major + '</strong></h6>\n' +
                    '      <h6><strong>' + data2.gpa + '</strong></h6>\n' +
                    '   </div>\n' +
                    '</div>'
                } else {
                  var set2 =
                    '<div class="row">\n' +
                    '   <div class="col-md-2">\n' +
                    '      <p>' + data2.entryYear + ' - ' + data2.graduationYear + '</p>\n' +
                    '   </div>\n' +
                    '   <div class="col-md-10">\n' +
                    '      <h6><strong>' + data2.schoolName + ', ' + data2.country + '</strong></h6>\n' +
                    '      <h6><strong>' + data2.major + '</strong></h6>\n' +
                    '      <h6><strong>' + data2.gpa + '</strong></h6>\n' +
                    '   </div>\n' +
                    '</div>'
                }

                $('#showListPendidikan').append(set2)
              })
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Education by Id Biodata Failed", "error");
            }
          })
          // End List Education

          // Start List Pengalaman Kerja
          $.ajax({
            url: 'api/pengalaman-kerja/biodata/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (res3) => {
              $('#showListPengalaman').html("");
              res3.map((data3) => {
                if (data3.joinYear == 0 || data3.joinYear == "" || data3.joinYear == null) {
                  data3.joinYear == "";
                }
                if (data3.resignYear == 0 || data3.resignYear == "" || data3.resignYear == null) {
                  data3.resignYear == "";
                }
                if (data3.lastPosition == "" || data3.lastPosition == null) {
                  data3.lastPosition == "";
                }
                if (data3.companyName == "" || data3.companyName == null) {
                  data3.companyName == "";
                }
                if (data3.joinYear == data3.resignYear) {
                  var set3 =
                    '<div class="row">\n' +
                    '   <div class="col-md-2">\n' +
                    '        <p>' + data3.joinYear + '</p>\n' +
                    '   </div>\n' +
                    '   <div class="col-md-10">\n' +
                    '        <h6><strong>' + data3.lastPosition + '</strong></h6>\n' +
                    '        <h6><strong>' + data3.companyName + '</strong></h6>\n' +
                    '   </div>\n' +
                    '</div>'
                } else {
                  var set3 =
                    '<div class="row">\n' +
                    '   <div class="col-md-2">\n' +
                    '        <p>' + data3.joinYear + ' - ' + data3.resignYear + '</p>\n' +
                    '   </div>\n' +
                    '   <div class="col-md-10">\n' +
                    '        <h6><strong>' + data3.lastPosition + '</strong></h6>\n' +
                    '        <h6><strong>' + data3.companyName + '</strong></h6>\n' +
                    '   </div>\n' +
                    '</div>'
                }
                $('#showListPengalaman').append(set3)
              })
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Pengalaman Kerja by Id Biodata Failed", "error");
            }
          })
          // Start List Pengalaman Kerja

          // Start List Keterampilan/Keahlian
          var set4_1 = "";
          var set4_2 = "";
          var set4_3 = "";
          $.ajax({
            url: 'api/keahlian/biodata/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (res4) => {
              var coma = ", ";
              var set4_1a = "";
              var set4_2a = "";
              var set4_3a = "";
              $('#keterampilanL1').html("");
              $('#keterampilanL2').html("");
              $('#keterampilanL3').html("");
              for (var i = 0; i < res4.length; i++) {
                if (res4[i].skillLevelId == 1) {
                  set4_1 += res4[i].skillName + coma;
                }
                if (res4[i].skillLevelId == 2) {
                  set4_2 += res4[i].skillName + coma;
                }
                if (res4[i].skillLevelId == 3) {
                  set4_3 += res4[i].skillName + coma;
                }
              }
              set4_1a = set4_1.slice(0, set4_1.length - 2);
              set4_2a = set4_2.slice(0, set4_2.length - 2);
              set4_3a = set4_3.slice(0, set4_3.length - 2);
              if (set4_1a == "") {
                set4_1a = "-";
              }
              if (set4_2a == "") {
                set4_2a = "-";
              }
              if (set4_3a == "") {
                set4_3a = "-";
              }
              var set4_1_1 = '<p><strong>' + set4_1a + ' </strong></p>'
              var set4_1_2 = '<p><strong>' + set4_2a + ' </strong></p>'
              var set4_1_3 = '<p><strong>' + set4_3a + ' </strong></p>'
              $('#keterampilanL1').append(set4_1_1);
              $('#keterampilanL2').append(set4_1_2);
              $('#keterampilanL3').append(set4_1_3);
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Pengalaman Kerja by Id Biodata Failed", "error");
            }
          })
          // End List Keterampilan/Keahlian

          // Start List Training
          $.ajax({
            url: 'api/training/biodata/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (res5) => {
              var v_totaldurationcertificate = 0;
              $('#showListTraining').html("");
              res5.map((data5) => {
                v_totaldurationcertificate = totaldurationcertificate(data5.trainingYear, data5.trainingDuration, data5.timePeriodId);
                if (data5.trainingYear == 0 || data5.trainingYear == "" || data5.trainingYear == null) {
                  data5.trainingYear == "";
                }
                if (data5.trainingName == 0 || data5.trainingName == "" || data5.trainingName == null) {
                  data5.trainingName == "";
                }
                if (data5.organizer == 0 || data5.organizer == "" || data5.organizer == null) {
                  data5.organizer == "";
                }
                if (v_totaldurationcertificate == 0 || v_totaldurationcertificate == "" || v_totaldurationcertificate == null) {
                  v_totaldurationcertificate == "";
                }
                if (data5.trainingYear == v_totaldurationcertificate) {
                  var set5 =
                    '<div class="row">\n' +
                    '  <div class="col-md-2">\n' +
                    '     <p>' + v_totaldurationcertificate + '</p>\n' +
                    '  </div>\n' +
                    '  <div class="col-md-10">\n' +
                    '     <h6><strong>' + data5.trainingName + '</strong></h6>\n' +
                    '     <h6><strong>' + data5.organizer + '</strong></h6>\n' +
                    '  </div>\n' +
                    '</div>'
                } else {
                  var set5 =
                    '<div class="row">\n' +
                    '  <div class="col-md-2">\n' +
                    '     <p>' + data5.trainingYear + ' - ' + v_totaldurationcertificate + '</p>\n' +
                    '  </div>\n' +
                    '  <div class="col-md-10">\n' +
                    '     <h6><strong>' + data5.trainingName + '</strong></h6>\n' +
                    '     <h6><strong>' + data5.organizer + '</strong></h6>\n' +
                    '  </div>\n' +
                    '</div>'
                }

                $('#showListTraining').append(set5)
              })
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Sertifikasi by Id Biodata Failed", "error");
            }
          })
          // Start List Training

          // Start List Sertifikasi
          $.ajax({
            url: 'api/sertifikasi/biodata/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (res6) => {
              $('#showListSertifikasi').html("");
              res6.map((data6) => {
                if (data6.validStartYear == 0 || data6.validStartYear == "" || data6.validStartYear == null) {
                  data6.validStartYear == "";
                }
                if (data6.untilYear == 0 || data6.untilYear == "" || data6.untilYear == null) {
                  data6.untilYear == "";
                }
                if (data6.certificateName == "" || data6.certificateName == null) {
                  data6.certificateName == "";
                }
                if (data6.publisher == "" || data6.publisher == null) {
                  data6.publisher == "";
                }
                var set6 =
                  '<div class="row">\n' +
                  '   <div class="col-md-2">\n' +
                  '       <p>' + data6.validStartYear + ' - ' + data6.untilYear + '</p>\n' +
                  '   </div>\n' +
                  '   <div class="col-md-10">\n' +
                  '       <h6><strong>' + data6.certificateName + '</strong></h6>\n' +
                  '       <h6><strong>' + data6.publisher + '</strong></h6>\n' +
                  '   </div>\n' +
                  '</div>'
                $('#showListSertifikasi').append(set6)
              })
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Sertifikasi by Id Biodata Failed", "error");
            }
          })
          // End List Sertifikasi

          // Start Pendidikan
          $.ajax({
            url: 'api/education/level/' + id,
            type: 'get',
            contentType: 'application/json',
            success: (res) => {
              $('#tbEducation').html("");
              res.map((data) => {
                if (data.entryYear == "" || data.entryYear == null) {
                  data.entryYear = "-";
                }
                if (data.graduationYear == "" || data.graduationYear == null) {
                  data.graduationYear = "-";
                }
                if (data.major == "" || data.major == null) {
                  data.major = "-";
                }
                if (data.gpa == "" || data.gpa == null || data.gpa == 0) {
                  data.gpa = "-";
                }
                var actions = '<div class="input-group-btn">\n' +
                  '             <div class="dropdown show">\n' +
                  '                 <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Action </a>\n' +
                  '            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">\n' +
                  '                 <a class="dropdown-item" onclick="get_id_education_edit(' + data.id + ')" data-toggle="modal" data-target="#editData">Edit</a>\n' +
                  '                 <a class="dropdown-item" onclick="get_id_education_delete(\'' + data.id + '\',\'' + data.schoolName + '\',\'' + id + '\')">Delete</a>\n' +
                  '            </div>\n' +
                  '             </div>\n' +
                  '        </div>'
                if (data.entryYear == data.graduationYear) {
                  var markup = "<tr class='text-center'><td>" + data.schoolName + "</td><td>" + data.name + "</td><td>" + data.entryYear + "</td><td>" + data.major + "</td><td>" + data.gpa + "</td><td class='align-middle text-center'>" + actions + "</td></tr>"
                } else {
                  var markup = "<tr class='text-center'><td>" + data.schoolName + "</td><td>" + data.name + "</td><td>" + data.entryYear + " s.d " + data.graduationYear + "</td><td>" + data.major + "</td><td>" + data.gpa + "</td><td class='align-middle text-center'>" + actions + "</td></tr>"
                }
                $('#tbEducation').append(markup)
              })
            },
            error: () => {
              swal.fire("Error!", "Fetch Data Education Failed", "error");
            }
          })
          // End Pendidikan
        },
        error: () => {
          swal.fire("Error!", "Fetch Biodata Detail Failed", "error");
        }
      })
    }

    function get_id_education_delete(vacancyId, schoolName, id) {
      $('#detailVacancy').modal('hide');
      const swalWithBootstrapButtons = Swal.mixin({
        customClass: {
          confirmButton: 'btn btn-danger',
          cancelButton: 'btn btn-warning'
        },
        buttonsStyling: false
      })

      swalWithBootstrapButtons.fire({
        title: 'Hapus Pendidikan ?',
        text: "Anda yakin ingin menghapus pendidikan di " + schoolName + " ?",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Ya',
        cancelButtonText: 'Tidak',
        reverseButtons: true
      }).then((result) => {
        if (result.value) {
          $.ajax({
            url: 'api/education/' + vacancyId,
            type: 'delete',
            contentType: 'application/json',
            success: () => {
              get_id_biodata(id);
              swalWithBootstrapButtons.fire(
                'Deleted!',
                'Your data has been deleted.',
                'success'
              )
              $('#detailVacancy').modal('show');
            },
          })
        } else if (
          /* Read more about handling dismissals below */
          result.dismiss === Swal.DismissReason.cancel
        ) {
          swalWithBootstrapButtons.fire(
            'Cancelled',
            'Your data file is safe :)',
            'error'
          )
          $('#detailVacancy').modal('show');
        }
      })
    }

    function showTAorSkripsi(educationLevel) {
      if (educationLevel > 4) {
        $("#egradSchool1").show();
        $("#egradSchool2").show();
      } else {
        $("#egradSchool1").hide();
        $("#egradSchool2").hide();
      }
    }


    function get_id_education_edit(vacancyId) {
      $('#detailVacancy').modal('hide');
      $.ajax({
        url: 'api/education/' + vacancyId,
        type: 'get',
        contentType: 'application/json',
        success: (res) => {
          $('#formEditData')[0].reset();
          $('#ebiodata_id').val(res.biodataId),
            $('#eid').val(res.id),
            $('#eschoolName').val(res.schoolName),
            $('#ecity').val(res.city),
            $('#ecountry').val(res.country),
            $('#eentryYear').val(res.entryYear),
            $('#egraduationYear').val(res.graduationYear),
            $('#emajor').val(res.major),
            $('#egpa').val(res.gpa),
            // $('#ejudulTa').val(res.judulTa),
            // $('#edeskripsiTa').val(res.deskripsiTa),
            $('#enotes').val(res.notes),
            showTAorSkripsi(res.educationLevelId),
            $.ajax({
              url: 'api/education-level',
              type: 'get',
              contentType: "application/json",
              success: function (result) {
                var optValue = "";
                optValue += '<option value="">- Pilih -</option>';
                for (var i = 0; i < result.length; i++) {
                  if (res.educationLevelId == result[i].id) {
                    optValue += `<option value="${result[i].id}" selected="selected">${result[i].name}</option>`;
                  } else {
                    optValue += `<option value="${result[i].id}">${result[i].name}</option>`;
                  }
                }
                $("#eeducationLevelId").html(optValue);

              },
              error: function () {
                swal.fire("Error!", "Fetch Education Detail Failed", "error");
              }
            })
        },
        error: () => {
          swal.fire("Error!", "Fetch Data Failed", "error");
        }
      })
    }

    // $(document).ready(function(){
    //   $('#eeducationLevelId').on('change', function() {
    //     if ( this.value <= 4) {
    //       $("#egradSchool1").hide();
    //       $("#egradSchool2").hide();     
    //     } else {
    //       $("#egradSchool1").show();
    //       $("#egradSchool2").show();
    //     }
    //   });
    // });

    // $(document).ready(function(){
    //   $('#educationLevelId').on('change', function() {
    //     if ( this.value <= 4) {
    //       $("#gradSchool1").hide();
    //       document.getElementById('judulTa').value='-';
    //       $("#gradSchool2").hide();
    //       document.getElementById('deskripsiTa').value='-';       
    //     } else {
    //       $("#gradSchool1").show();
    //       document.getElementById('judulTa').value='-';
    //       $("#gradSchool2").show();
    //       document.getElementById('deskripsiTa').value='-';
    //     }
    //   });
    // });

    $('#editBtn').click(() => {
      if ($('#eschoolName').val() == "" && $("#eeducationLevelId").val() == "") {
        swal.fire("Data empty!", "Data Nama Sekolah/Instansi, Jenjang Pendidikan Masih Kosong", "error");
      } else if ($('#eschoolName').val() == "") {
        swal.fire("Data empty!", "Data Sekolah Masih Kosong", "error");
      } else if ($("#eeducationLevelId").val() == "") {
        swal.fire("Data empty!", "Data Level Education Masih Kosong", "error");
      } else {
        if ($('#egraduationYear').val() < $('#eentryYear').val()) {
          swal.fire("Graduation Year > Entry Year", "Make Sure Data Graduation Year & Entry Year ", "error");
        } else {
          var id = $('#eid').val();
          var biodata_id = $('#ebiodata_id').val();
          var data = getFormData($('#formEditData'));
          $.ajax({
            url: 'api/education/' + id,
            type: 'put',
            contentType: 'application/json',
            data: JSON.stringify(data),
            success: (res) => {
              Swal.fire({
                icon: 'success',
                title: 'Update Data Success',
                showConfirmButton: false,
                timer: 1500
              })
              $('#editData').modal('hide');
              get_id_biodata(biodata_id);
              $('#detailVacancy').modal('show');
            },
            error: () => {
              swal.fire("Error!", "Update data error", "error");
            }
          })
        }
      }
    })

    $('#saveBtn').click(() => {
      if ($('#schoolName').val() == "" && $("#educationLevelId").val() == "") {
        swal.fire("Data empty!", "Data Nama Sekolah/Instansi, Jenjang Pendidikan Masih Kosong", "error");
      } else if ($('#schoolName').val() == "") {
        swal.fire("Data empty!", "Data Nama Sekolah/Instansi Masih Kosong", "error");
      } else if ($("#educationLevelId").val() == "") {
        swal.fire("Data empty!", "Data Jenjang Pendidikan Masih Kosong", "error");
      } else {
        var value_ipk = $('#gpa').val();
        var id = $('#biodataId').val();
        var data = getFormData($('#formAddData'));
        if (value_ipk > 4) {
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'IPK Max 4',
          })
        } else {
          $('#saveBtn').hasClass('disabled');
          $.ajax({
            url: 'api/education/',
            type: 'post',
            contentType: 'application/json',
            data: JSON.stringify(data),
            success: (res) => {
              Swal.fire({
                icon: 'success',
                title: 'Add Data Success',
                showConfirmButton: false,
                timer: 1500
              })
              $('#addData').modal('hide');
              get_id_biodata(id);
              $('#detailVacancy').modal('show');
            },
            error: () => {
              swal.fire("Error!", "Add data error", "error");
            }
          })
        }
      }
    })

    function getFormData($form) {
      var unindexed_array = $form.serializeArray();
      var indexed_array = {};
      $.map(unindexed_array, function (n, i) {
        indexed_array[n['name']] = n['value'];
      });
      return indexed_array;
    }

  </script>

</th:block>

</html>